<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>moboNet - Aepolicht</title>
      
      
      
      
        <meta name="author" content="Alexander Policht">
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Aepolicht">
    <meta property="og:image" content="None/../">
    <meta name="apple-mobile-web-app-title" content="Aepolicht">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-a422ff04cc.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Projects <i class="icon icon-link"></i>
              
            
          </span>
        
        moboNet
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://aepolicht.github.io" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          Aepolicht
          <span class="version">
            
          </span>
        </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Projects</span>
    <ul>
      
        
  <li>
    <a class="current" title="moboNet" href="./">
      moboNet
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Description" href="#description">
                Description
              </a>
            </li>
          
            <li class="anchor">
              <a title="Video" href="#video">
                Video
              </a>
            </li>
          
            <li class="anchor">
              <a title="Diagram" href="#diagram">
                Diagram
              </a>
            </li>
          
            <li class="anchor">
              <a title="Components" href="#components">
                Components
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="Android Continuum" href="../android_continuum/">
      Android Continuum
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="About Me" href="../about/">
      About Me
    </a>
    
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="mobonet-a-home-automation-experiment">moboNet: A Home Automation Experiment</h1>
<h2 id="description">Description</h2>
<p>This goal of this project was to create an affordable and expandable home network system and along the way learn Java, C#, Matlab, OrCAD, and PSpice. </p>
<hr />
<h2 id="video">Video</h2>
<p><p align="center"><iframe width="640" height="360" src="//www.youtube.com/embed/LThQ7OVa-BA" frameborder="0" allowfullscreen></iframe></p>
<small></p>
<hr />
<h2 id="diagram">Diagram</h2>
<p align="center"><img src="http://i.imgur.com/7VIPh6O.png" alt="Drawing" style="width: 700px;"/></p>

<h2 id="components">Components</h2>
<h3 id="client">Client</h3>
<p>The clients consist of any device with the means of sending commands to the server module. This means Android application, Desktop application in addition to the door knocker module which sends notifications over the 315MHz network.</p>
<h3 id="server">Server</h3>
<p>The server module is an arduino uno with an Ethernet shield which transfers data from LAN to a 418MHz network. I designed a relatively simple communication protocol for the RF links to provide reliable communication from server to light module. </p>
<h3 id="light-modules">Light Modules</h3>
<p>The light module consists of RGB LEDs which receives commands via the 418MHz network. The might module is what sits under the cube in the video and will eventually be equipped to be screwed into a standard light bulb socket.</p>
<hr />
<h3 id="control">Control</h3>
<h3 id="android-application">Android Application</h3>
<p><p align="center"><img src="http://i.imgur.com/ecZfp9x.png" alt="Drawing" style="width: 300px;"/>
<img src="http://i.imgur.com/T7TJgyy.png" alt="Drawing" style="width: 300px;"/>
<img src="http://i.imgur.com/WtuYH2U.png" alt="Drawing" style="width: 300px;"/>
</p></p>
<p>This is the Android application I wrote to control the light modules from my phone. With this application i can control all aspects of the module in addition to the 4 channels of the RF AC relays. To communicate with the sever it must be connected to the wifi network that the server is on however I am working on a secure way to control the lights from anywhere so that i can control systems when I'm away.</p>
<h3 id="desktop-application">Desktop Application</h3>
<p><p align="center"><img alt="DesktopApp" src="http://i.imgur.com/YgeQw6P.png" /></p></p>
<p>Written in C# in visual studio, the desktop application operates in the same way as the Android application, by sending UDP packets to the server on the network. </p>
<hr />
<h3 id="light-module">Light Module</h3>
<h3 id="design">Design</h3>
<p align="center"><img src="http://i.imgur.com/KZJO7HZ.png" alt="Drawing" style="width: 500px;"/></p>

<h3 id="schematic">Schematic</h3>
<p><img alt="Screenshot" src="../img/supply.png" /></p>
<p><img alt="Screenshot" src="../img/uc.png" /></p>
<h3 id="pcb">PCB</h3>
<p align="center"><img src="http://i.imgur.com/8SJUMXG.png" alt="Drawing"/></p>

<h3 id="audio-mode-and-signal-analysis">Audio Mode and Signal Analysis</h3>
<h3 id="description_1">Description</h3>
<p>This mode is a part of the light module which responds to music, here i will go over how the input signal is generated and processed.</p>
<h3 id="circuit">Circuit</h3>
<p>There are five main components to the Light module. </p>
<ul>
<li>Control System</li>
<li>Power Supply</li>
<li>LEDs and current driving circuit</li>
<li>Communication</li>
<li>Analog audio processing circuit</li>
</ul>
<p>The control system i use is an ATMega238 which ties all the components together. The power supply for this circuit i use a 9V supply into a 5V regulator for logic. The LEDs i use are two 3W RGB LEDs in series. Each diode is 1W and there are 3 individual LEDs in each package. As for communication i use the RX module of a 418MHz RF link to receive messages from the server. The analog circuit consists of a BJT preamplifier in a common emitter configuration which provides around 40dB of amplification. This is not enough by itself however so i then cascade that into an LM386 amplifier in a configuration providing another 20dB of amplification which puts the voltage into a range easily readable for the ADC on the microcontroller.</p>
<h3 id="frequency-response">Frequency Response</h3>
<p align="center"><img src="http://i.imgur.com/iS6kP5U.png" alt="Drawing" style="width: 900px;"/></p>

<p>Here are the stages of the analog frequency response. It is generated from the circuit model in PSpice by performing an AC frequency sweep from 1Hz to 1MHz.</p>
<h3 id="digital-sampling-and-filtering">Digital Sampling and Filtering</h3>
<p>After the signal is amplified and filtered, it is then sampled at 20Khz. Further processing is then done through digital filtering. I am using a 30th order FIR filter. This method doesn't provide continuous digital signal but rather a burst of 31 samples every time the audio processing loop is entered. I have found that with the limited processing speed of the ATMEGA328, it is best to sample in this method rather than is interrupt based. Currently there are only two channels, 0-150Hz and 1KHz-10KHz. I hope to push this to more resolution in the future so i can design a music algorithm with more complexity while still staying within a 60Hz loop frequency. When the computations begin to take longer than ~20mS there becomes noticeable jitter. I may yet be able to compensate for this if i need to when adding more channels.</p>
<!-- - - -
###Next on the List

+   Scale to incorporate more light module nodes and add controllability for clients
+   Redo PCB to reflect hardware changes
+   Audio Algorithm v.2 based on DFT matrix

- - -
###[Development Log]("../page2.html") -->
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href=".." title="Home">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Home
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../android_continuum/" title="Android Continuum">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Android Continuum
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = '';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    
    
  </body>
</html>